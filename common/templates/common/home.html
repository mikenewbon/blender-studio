{% extends 'common/base.html' %}
{% load static %}

{% block content %}

<div class="jumbotron jumbotron-fluid jumbotron-overlay overlay-wide-content jumbotron header mb-4">
  <div class="jumbotron-bg-wrapper">
    <img class="jumbotron-bg" src="{% static "common/images/home/settlers-bg.png" %}">
    <!-- TODO(Mike): Impliment image sets when flat-pages are done. -->
    {% comment %}
    {% include "common/components/helpers/image_set.html" with classes="jumbotron-bg" img_source=XXX xsmall_width="576" small_width="758" medium_width="992" large_width="1200" xlarge_width="1920" %}
    {% endcomment %}
  </div>
  <div class="container-xl">
    <div class="row">
      <div class="col-lg-5 col-md-6">
        <div class="jumbotron-body">
          <p class="mb-1"><span class="badge badge-primary mr-2">New</span><span class="subtitle">Open Project</span>
          </p>
          <h1 class="mb-2">Settlers</h1>
          <p>A gift from the Blender Animation Studio team to the community. Free character rigs and sets.</p>
          <p class="mb-3">Settlers is a collection of character rigs, environments and animated scenes, created by the
            Blender Animation Studio team and shared with the community as they are made. Completely free, for everyone.
          </p>
          <a href="/films/settlers" class="btn btn-primary">See the Project</a>
        </div>
      </div>
    </div>
  </div>

</div>

<div class="container-xl">

  <section class="mb-4">
    <div class="row justify-content-center mb-3">
      <div class="col">
        <h2 class="mb-0">Latest Training</h2>
        <p class="mb-0">Want to see more? <a href="/training">Explore all training</a></p>
      </div>
      <div class="col-auto carousel-card-toolbar">
        <a class="btn btn-lg btn-transparent btn-icon {% if featured_trainings|length <= 1 %}onlyOne{% elif featured_trainings|length <= 3 %} lessThanThree {% endif %}"
          href="#latestTraining" role="button" data-slide="prev">
          <i class="material-icons">arrow_back</i>
        </a>
        <a class="btn btn-lg btn-transparent btn-icon {% if featured_trainings|length <= 1 %}onlyOne{% elif featured_trainings|length <= 3 %} lessThanThree {% endif %}"
          href="#latestTraining" role="button" data-slide="next">
          <i class="material-icons">arrow_forward</i>
        </a>
      </div>
    </div>
    <div class="row">


      <div id="latestTraining" class="carousel carousel-card-3 slide w-100" data-ride="carousel" data-interval="0">
        <div class="carousel-inner w-100" role="listbox">
          <div class="carousel-item active">
            {% for training in featured_trainings|slice:':1' %}
            {% include "common/components/cards/card_training.html" with training=training card_sizes="col-md-4" %}
            {% endfor %}
          </div>
          {% for training in featured_trainings|slice:'1:6' %}
          <div class="carousel-item">
            {% include "common/components/cards/card_training.html" with training=training card_sizes="col-md-4" %}
          </div>
          {% endfor %}
        </div>
      </div>


    </div>
  </section>

  <section class="mb-4">
    <div class="row justify-content-center mb-3">
      <div class="col">
        <h2 class="mb-0">Latest Training</h2>
        <p class="mb-0">Want to see more? <a href="/training">Explore all training</a></p>
      </div>
      <div class="col-auto carousel-card-toolbar">
        <a class="btn btn-lg btn-transparent btn-icon {% if featured_trainings|length <= 1 %}onlyOne{% elif featured_trainings|length <= 4 %} lessThanFour {% endif %}"
          href="#continueLearning" role="button" data-slide="prev">
          <i class="material-icons">arrow_back</i>
        </a>
        <a class="btn btn-lg btn-transparent btn-icon {% if featured_trainings|length <= 1 %}onlyOne{% elif featured_trainings|length <= 4 %} lessThanFour {% endif %}"
          href="#continueLearning" role="button" data-slide="next">
          <i class="material-icons">arrow_forward</i>
        </a>
      </div>
    </div>
    <div class="row">


      <div id="continueLearning" class="carousel carousel-card-4 slide w-100" data-touch="true" data-ride="carousel" data-interval="0">
        <div class="carousel-inner w-100" role="listbox">
          <div class="carousel-item active">
            {% for training in featured_trainings|slice:':1' %}
            {% include "common/components/cards/card_training.html" with training=training card_sizes="col-md-3" %}
            {% endfor %}
          </div>
          {% for training in featured_trainings|slice:'1:6' %}
          <div class="carousel-item">
            {% include "common/components/cards/card_training.html" with training=training card_sizes="col-md-3" %}
          </div>
          {% endfor %}
        </div>
      </div>


    </div>
  </section>

  {% comment %} <div id="myCarousel" class="carousel slide w-100" data-ride="carousel">
    <div class="carousel-inner w-100" role="listbox">
      <div class="carousel-item active">
        <div class="col-lg-2">
          <img class="img-fluid" src="http://placehold.it/350x180?text=1">
        </div>
      </div>
      <div class="carousel-item">
        <div class="col-lg-2">
          <img class="img-fluid" src="http://placehold.it/350x180?text=2">
        </div>
      </div>
      <div class="carousel-item">
        <div class="col-lg-2">
          <img class="img-fluid" src="http://placehold.it/350x180?text=3">
        </div>
      </div>
      <div class="carousel-item">
        <div class="col-lg-2">
          <img class="img-fluid" src="http://placehold.it/350x180?text=4">
        </div>
      </div>
      <div class="carousel-item">
        <div class="col-lg-2">
          <img class="img-fluid" src="http://placehold.it/350x180?text=5">
        </div>
      </div>
      <div class="carousel-item">
        <div class="col-lg-2">
          <img class="img-fluid" src="http://placehold.it/350x180?text=6">
        </div>
      </div>
      <div class="carousel-item">
        <div class="col-lg-2">
          <img class="img-fluid" src="http://placehold.it/350x180?text=7">
        </div>
      </div>
      <div class="carousel-item">
        <div class="col-lg-2">
          <img class="img-fluid" src="http://placehold.it/350x180?text=8">
        </div>
      </div>
    </div>
    <a class="carousel-control-prev bg-dark w-auto" href="#myCarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next bg-dark w-auto" href="#myCarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div> {% endcomment %}

  {% comment %} <section class="mb-4">
    <div class="row justify-content-center mb-3">
      <div class="col">
        <h2 class="mb-0">Continue Learning</h2>
        <p class="mb-0">Recently viewed training sections will appear here.</p>
      </div>
      <div class="col-auto">
        <a class="btn btn-lg btn-transparent btn-icon {% if featured_trainings|length <= 3 %} disabled {% endif %}"
          href="#continueLearning" role="button" data-slide="prev">
          <i class="material-icons">arrow_back</i>
        </a>
        <a class="btn btn-lg btn-transparent btn-icon {% if featured_trainings|length <= 3 %} disabled {% endif %}"
          href="#continueLearning" role="button" data-slide="next">
          <i class="material-icons">arrow_forward</i>
        </a>
      </div>
    </div>
    <div class="row">
      <div id="continueLearning" class="carousel slide w-100" data-ride="carousel">
        <div class="carousel-inner w-100" role="listbox">
          <div class="carousel-item active">
            {% for training in featured_trainings|slice:':1' %}
            {% include "common/components/cards/card_training.html" with training=training %}
            {% endfor %}
          </div>
          {% for training in featured_trainings|slice:'1:6' %}
          <div class="carousel-item">
            {% include "common/components/cards/card_training.html" with training=training %}
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </section>

  <section class="mb-4">
    <div class="row justify-content-center mb-3">
      <div class="col-md-6 text-center">
        <h2 class="mb-0">Latest Film Updates</h2>
        <p class="mb-0">Want to see more updates from Settlers? <a href="/films/settlers/production-logs">See all
            weeklies</a></p>
      </div>
    </div>
    <div class="row">
      <div id="continueLearning" class="carousel slide w-100" data-ride="carousel">
        <div class="carousel-inner w-100" role="listbox">
          <div class="carousel-item active">
            {% for training in featured_trainings|slice:'1:' %}
            {% include "common/components/cards/card_training.html" with training=training card_sizes="col-md-4" %}
            {% endfor %}
          </div>
          {% for training in featured_trainings|slice:'1:6' %}
          <div class="carousel-item">
            {% include "common/components/cards/card_training.html" with training=training %}
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </section> {% endcomment %}

</div>

<script>
  // Humanizes dates
  document.querySelectorAll('.date').forEach(i => {
    i.textContent = timeDifference(epochToDate(i.textContent));
  });
</script>

<script>
  $('.carousel-card-3 .carousel-item').each(function () {
    cardCarousel(this, 3);
  });

  $('.carousel-card-4 .carousel-item').each(function () {
    cardCarousel(this, 4);
  });
</script>

{% endblock content %}
